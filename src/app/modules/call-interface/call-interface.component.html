<div class="container text-center">
    <div class="logo">
        <!-- Ensure the image source is valid and sanitized to prevent XSS -->
        <img [src]="sanitizeImageSrc()" alt="Logo" class="logo-img" />
    </div>
    <div class="agentname">
        <!-- Null check for agentName to prevent rendering undefined/null values -->
        {{ agentName || 'Unknown Agent' }}
    </div>

    <!-- Check the state of isCalling with an 'else' condition -->
    <ng-container *ngIf="!isCalling; else callActions">
        <div class="call-button">
            <!-- Ensure startCall() method exists and is bound correctly -->
            <button (click)="startCall()" class="btn btn-primary button" [disabled]="!canStartCall()">Call</button>
        </div>
    </ng-container>

    <ng-template #callActions>
        <div class="call-actions">
            <!-- Ensure hangUp() is defined and safe to call -->
            <button (click)="hangUp()" class="btn btn-danger icon" [disabled]="!canHangUp()">
                <i class="bi bi-telephone-x"></i>      
            </button>

            <!-- Improved mic toggle logic -->
            <button (click)="toggleMic()" class="btn btn-secondary icon">
                <span *ngIf="micEnabled">
                    <i class="bi bi-mic"></i>
                </span>
                <span *ngIf="!micEnabled">
                    <i class="bi bi-mic-mute"></i>
                </span>
            </button>
        </div>
    </ng-template>
</div>